function login(){const t=usernameInput.value.trim();if("root"!==t.toLowerCase())return passwordInput.value="",usernameInput.value="",void usernameInput.focus();currentUser="root",loginBox.style.display="none",terminalContent.style.display="block",output.textContent=`Last login: ${(new Date).toString()}\nWelcome to UNIX System v2.1\n`,terminalContent.scrollTop=0,updatePrompt(),commandInput.focus()}function updatePrompt(){promptSpan.innerHTML=`<span class="prompt-user">${currentUser}</span><span class="prompt-at">@</span><span class="prompt-host">bradster</span>:<span class="prompt-dir">${currentDir}</span><span class="prompt-symbol">$ </span>`}function rot13(t){return t.replace(/[a-zA-Z]/g,function(t){return String.fromCharCode((t<="Z"?90:122)>=(t=t.charCodeAt(0)+13)?t:t-26)})}async function fetchAndDisplaySecret(){try{const t=Math.random().toString(36).substring(7),e=await fetch("https://corsproxy.io/?"+encodeURIComponent("https://api.quotable.io/random")+"&cb="+t,{cache:"no-store"});if(!e.ok)throw new Error("API request failed");const n=await e.json(),o=`"${n.content}" - ${n.author}`,r=rot13(o);secretMessage=r,output.innerHTML=output.innerHTML.replace("Loading secret message...",r)}catch(t){const e=['"The only way to do great work is to love what you do." - Steve Jobs','"Innovation distinguishes between a leader and a follower." - Steve Jobs','"Be yourself; everyone else is already taken." - Oscar Wilde','"Two things are infinite: the universe and human stupidity." - Albert Einstein','"In the middle of difficulty lies opportunity." - Albert Einstein','"The future belongs to those who believe in the beauty of their dreams." - Eleanor Roosevelt','"It is during our darkest moments that we must focus to see the light." - Aristotle','"Life is what happens when you are busy making other plans." - John Lennon','"The way to get started is to quit talking and begin doing." - Walt Disney','"Do not go where the path may lead, go instead where there is no path." - Ralph Waldo Emerson'],n=e[Math.floor(Math.random()*e.length)],o=rot13(n);secretMessage=o,output.innerHTML=output.innerHTML.replace("Loading secret message...",o)}}function autocomplete(){const t=commandInput.value,e=t.split(" ");if(1===e.length){const n=availableCommands.filter(t=>t.startsWith(e[0]));1===n.length?commandInput.value=n[0]+" ":n.length>1&&(output.innerHTML+=`${promptSpan.innerHTML}${t}\n${n.join("  ")}\n`,terminalContent.scrollTop=terminalContent.scrollHeight)}else if(e.length>=2){const n=e[e.length-1];let o=[];if(n.includes("/")){const t=n.split("/"),e=t.pop(),r=t.join("/")||"/";if(fileSystem[r]){const t=fileSystem[r];o=t.filter(t=>t.startsWith(e)).map(t=>"/"===r?"/"+t:r+"/"+t)}Object.keys(fileContents).forEach(t=>{if(t.startsWith(r+"/")){const n=t.substring(r.length+1);!n.includes("/")&&n.startsWith(e)&&o.push(t)}})}else{const t=[...availableFiles,...availableDirs];o=t.filter(t=>t.startsWith(n))}if(o=[...new Set(o)],1===o.length)e[e.length-1]=o[0],commandInput.value=e.join(" ");else if(o.length>1){const e=o.map(t=>{if(t.includes("/")){const e=t.split("/");return e[e.length-1]}return t});output.innerHTML+=`${promptSpan.innerHTML}${t}\n${e.join("  ")}\n`,terminalContent.scrollTop=terminalContent.scrollHeight}}}function executeCommand(t){const e=t.split(" "),n=e[0].toLowerCase(),o=e.slice(1).join(" ");if(commands[n]){const t=commands[n](o);null!=t&&(output.innerHTML+=t,output.innerHTML+="\n")}else output.innerHTML+=`bash: ${n}: command not found\n`}const startButton=document.getElementById("start-button"),terminal=document.getElementById("terminal"),loginBox=document.getElementById("login-box"),terminalContent=document.getElementById("terminal-content"),usernameInput=document.getElementById("username"),passwordInput=document.getElementById("password"),commandInput=document.getElementById("command-input"),output=document.getElementById("output"),promptSpan=document.getElementById("prompt");let currentUser="user",currentDir="~",commandHistory=[],historyIndex=-1,secretMessage="",justCleared=!1;const fileSystem={"/":["bin","etc","usr","home","var","tmp"],"/bin":["cat","more","ps","clear","date","echo","exit","fortune","ls","pwd","rot13","uname","uptime","whoami","cd"],"/etc":["passwd","hosts","hostname","fstab","resolv.conf"],"/usr":["bin","lib","share","local"],"/usr/bin":["vim","gcc","python","perl","ruby"],"/home":["root"],"/home/root":["TODO.txt","README.txt","secret.txt"],"/var":["log","tmp","cache"],"/tmp":[]},fileContents={"/etc/passwd":"root:x:0:0:root:/root:/bin/bash\ndaemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\nbin:x:2:2:bin:/bin:/usr/sbin/nologin\nsys:x:3:3:sys:/dev:/usr/sbin/nologin\nsync:x:4:65534:sync:/bin:/bin/sync\ngames:x:5:60:games:/usr/games:/usr/sbin/nologin\nman:x:6:12:man:/var/cache/man:/usr/sbin/nologin\nlp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin\nmail:x:8:8:mail:/var/mail:/usr/sbin/nologin\nnews:x:9:9:news:/var/spool/news:/usr/sbin/nologin\nwww-data:x:33:33:www-data:/var/www:/usr/sbin/nologin\nbackup:x:34:34:backup:/var/backups:/usr/sbin/nologin\nnobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin","/etc/hosts":"127.0.0.1       localhost\n127.0.1.1       bradster\n::1             localhost ip6-localhost ip6-loopback\nff02::1         ip6-allnodes\nff02::2         ip6-allrouters","TODO.txt":"My To Do List...\n\n1) finish the site\n2) push to github\n3) sleep","README.txt":"Merry Christmas and Happy New Year!!","/etc/hostname":"bradster","secret.txt":"encrypted"},availableCommands=["cat","more","clear","ps","date","echo","exit","fortune","ls","pwd","rot13","uname","uptime","whoami","cd"],availableFiles=["secret.txt","TODO.txt","README.txt","passwd","hosts","hostname"],availableDirs=["/bin","/etc","/usr","/home","/var","/tmp","Desktop","Documents","Downloads"];startButton.addEventListener("click",()=>{startButton.style.display="none",terminal.style.display="block",usernameInput.focus()}),setTimeout(()=>{startButton.style.display="block"},5e3),usernameInput.addEventListener("keydown",t=>{"Enter"===t.key&&passwordInput.focus()}),passwordInput.addEventListener("keydown",t=>{"Enter"===t.key&&login()});const commands={ls:t=>{const e=t.trim()||currentDir;let n=e;if("~"===e?n="/home/root":"."===e?n="~"===currentDir?"/home/root":currentDir:e.startsWith("/")||(n="~"===currentDir?"/home/root":currentDir),fileSystem[n]){const t=fileSystem[n];let e="total "+4*t.length+"\n";return t.forEach(t=>{const o=n+"/"+t,r=void 0!==fileSystem[o],s=r?"drwxr-xr-x":"-rw-r--r--",i=r?"4096":Math.floor(5e3*Math.random())+100;e+=`${s}  2 ${currentUser} users ${i.toString().padStart(4)} Dec 24 10:30 ${t}\n`}),e.trimEnd()}return`ls: cannot access '${t}': No such file or directory`},cd:t=>{if(!t||""===t.trim()||"~"===t.trim())return currentDir="~",updatePrompt(),"";let e=t.trim();if(".."===e){if("~"===currentDir)currentDir="/home";else{if("/"===currentDir)return"";{const t=currentDir.split("/").filter(t=>t);t.pop(),currentDir=0===t.length?"/":"/"+t.join("/")}}return updatePrompt(),""}if(e.startsWith("/")){if(fileSystem[e])return currentDir=e,updatePrompt(),""}else{const t="~"===currentDir?"/home/root":currentDir,n="/"===t?"/"+e:t+"/"+e;if(fileSystem[n])return currentDir=n,updatePrompt(),""}return`bash: cd: ${t}: No such file or directory`},pwd:()=>"~"===currentDir?"/home/root":currentDir,whoami:()=>currentUser,date:()=>(new Date).toString(),ps:()=>"    PID TTY          TIME CMD\n1296717 pts/0    00:00:00 bash\n1481222 pts/0    00:00:00 ps",uptime:()=>{const t=Math.floor(100*Math.random())+1,e=Math.floor(24*Math.random()),n=Math.floor(60*Math.random());return` ${(new Date).toTimeString().split(" ")[0]} up ${t} days, ${e}:${n}, 3 users, load average: 0.${Math.floor(90*Math.random())}, 0.${Math.floor(90*Math.random())}, 0.${Math.floor(90*Math.random())}`},uname:()=>"Linux bradster 5.15.0-92-generic #102-Ubuntu SMP x86_64 GNU/Linux",cat:t=>{if(!t||""===t.trim())return"cat: missing file operand\nTry 'cat --help' for more information.";let e=t.trim();if("secret.txt"===e||"/home/root/secret.txt"===e)return secretMessage="",setTimeout(()=>fetchAndDisplaySecret(),100),"Loading secret message...";if(fileContents[e])return fileContents[e];if(!e.startsWith("/")){const t="~"===currentDir?"/home/root":currentDir,n=t+"/"+e;if(fileContents[n])return fileContents[n];if(fileContents[e])return fileContents[e]}return`cat: ${t}: No such file or directory`},more:t=>{if(!t||""===t.trim())return"more: missing file operand\nTry 'more --help' for more information.";let e=t.trim();if("secret.txt"===e||"/home/root/secret.txt"===e)return secretMessage="",setTimeout(()=>fetchAndDisplaySecret(),100),"Loading secret message...";if(fileContents[e])return fileContents[e];if(!e.startsWith("/")){const t="~"===currentDir?"/home/root":currentDir,n=t+"/"+e;if(fileContents[n])return fileContents[n];if(fileContents[e])return fileContents[e]}return`more: ${t}: No such file or directory`},echo:t=>t||"",fortune:()=>{const t=["A computer program does what you tell it to do, not what you want it to do.","The best way to predict the future is to implement it.","There are only 10 types of people: those who understand binary and those who don't.","To err is human, to really foul up requires the root password.","Unix is user-friendly. It's just very selective about who its friends are.","I'd explain it to you, but your kernel wouldn't understand.","Real programmers count from 0."];return t[Math.floor(Math.random()*t.length)]},rot13:t=>t&&""!==t.trim()?"secret.txt"===t.trim()?secretMessage?rot13(secretMessage):'Error: secret.txt has not been read yet. Use "cat secret.txt" first.':rot13(t):'Usage: rot13 <text> or rot13 <filename>\nExample: rot13 "Hello World" or rot13 secret.txt',clear:()=>(output.innerHTML="",terminalContent.scrollTop=0,justCleared=!0,commandInput.focus(),null),exit:()=>(output.innerHTML+="\nLogging out...\n\n",setTimeout(()=>{location.reload()},1e3),"")};commandInput.addEventListener("keydown",t=>{if("Tab"===t.key)t.preventDefault(),autocomplete();else if("Enter"===t.key){const t=commandInput.value.trim();output.innerHTML+=`${promptSpan.innerHTML}${t}\n`,t&&(commandHistory.push(t),historyIndex=commandHistory.length,executeCommand(t)),commandInput.value="",justCleared?(terminalContent.scrollTop=0,justCleared=!1):terminalContent.scrollTop=terminalContent.scrollHeight}else"ArrowUp"===t.key?(t.preventDefault(),historyIndex>0&&(historyIndex--,commandInput.value=commandHistory[historyIndex])):"ArrowDown"===t.key&&(t.preventDefault(),historyIndex<commandHistory.length-1?(historyIndex++,commandInput.value=commandHistory[historyIndex]):(historyIndex=commandHistory.length,commandInput.value=""))}),document.addEventListener("click",()=>{"block"===terminalContent.style.display&&commandInput.focus()});