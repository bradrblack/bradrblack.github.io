<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
	<meta content='width=device-width' name='viewport'>
  <meta name="theme-color" content="#222222">
<link rel="stylesheet" href="style.css">
	<title>Pixel Gadget Cloud</title>
<style>
    ol {
      margin: auto;
      text-align: left;
      display: inline-block;
    }
    .btn {
      outline: none;
      cursor: pointer;
      padding: 8px;
      margin: 10px;
      width: 400px;
      font-family: Monaco, "Bitstream Vera Sans Mono", "Lucida Console";
      font-size: 14px;
      background-color: #333;
      color: white;
      border: 0px solid white;
      border-radius: 25px;
    }
</style>
</head>
<header align="center" text-align="center">
<a><img alt="" src="./neo.png" width="253" height="185"></a>
<h1 text-align="center">Pixel Gadget Cloud</h1>
</header>
<body align="center" >
<h2>How to use Adafruit IO, IFTT and Voice Assistants</h2>
<p>Welcome to the wild world of "Internet of Things"!  A while back I wondered if it would be possible to tie Pixel Gadget into the voice control world of Google Assitant and Amazon Alexa.  I know you could do that if you were part of "Big Smart Lightbulb" but what about a tiny maker with a soldering iron and a table saw?  Well, it turns out that it can be done.  hold on to your coffees folks, here we go!
<h3>Concepts</h3>
<p>Many existing IOT devices use something call MQTT which is a messaging protocol supporting a "publish and subscribe" mechanism.  Pixel Gadget is going to connect to an MQTT service/broker and subscribe to a "feed" which will provide commands.  The MQTT service used is from Adafruit IO - this is a free service for low-volume usage and was created by a company called Adafruit that sells a bunch of stuff for learning electronics.   Once Pixel Gadget is connected to Adafruit IO, you can enter commands directly from that site or create apps that use APIs and SDKs to send commands.  You can even create a command line script to send commands.<br><br>In order to make the connection to Google or Alexa voice control, we need to use another free service, "If This Then That" or IFTT.   IFTT allows you to create a few free "Applets" and is able to take triggers from dozens of products and services and send actions to others.  What we want here is "If Google or Alexa" get a voice command, send a command to a specific Adafruit IO MQTT Feed which will then be forwarded on to our gadget.  Simple.</p>
<h3>Step 1: Create an Adafruit IO Account and a "Feed" to control Pixel Gadget</h3>
<ol>
<li>Head on over to <a href="https://io.adafruit.com">io.adafruit.com</a> and scroll down to "Get Started for FREE". For privacy reasons, I created a separate email identify for all of my IOT things including Google Assistant, Adadruit IO and IFTT, but you do you.
<li>Once you have created your account, login and create the feed we need: under the "Feeds" menu select "+ New Feed" and use the name to "pixelgadgetcloud".  <u>You must use this exact feed name.</u>
</ol>
</p>
<h3>Step 2: Create an IFTT account and an Applet to Connect Your Voice Assistant to Adafruit IO</h3>
<p>
<ol>
<li>Head on over to <a href="https://ifttt.com/join">https://ifttt.com/join</a> and create a free account.  Login and click on "Create" in the upper right to create an Applet.
<li>Next to the "If This" click on "Add" and search for "Google Assistant" 
<li>Select "Say a phrase with a text ingredient"
<li>Connect your IFTTT account to your Google Assistant Account
<li>Select a preferred keyword for the trigger under "What do you want to say" and add a "$" to the end as a placeholder for the text ingredient which will be our command.  I used some variations like  "Pixel Gadget $" and "Gadget $".
<li>Under "What do you want the Assistant to say in response" I chose "$" to have the command repeated back - this is usefule to know if Google actually heard you correctly.
<li>Select "Create Trigger"
<li>Next click "Add" beside the "Then That" label and choose "Adafruit"
<li>Choose "Send data to Adafruit IO" and connect your acount.
<li>Under Feed Name, choose the feed created earlier.
<li>Under "Data to Save" select "Add ingredient" and "TextField"
<li>Select "Create Action", "Continue" and "Finish"
</ol><br><br>
These instruction have been for Google Assistant -- Alexa is very similar but not as flexible. You'll need to create new Applets for each of the commands that you want to use since Alex integration on IFTT does not support a text ingredient.  I create an Applet like: If You say "Alexa trigger gadget time", then Send data to Pixel Gadget Cloud feed with an action using "time" as the datea to save to Adafruit IO.
</p>
<h3>Step 3: Configure or Re-Configure Your Pixel Gadget with your Adafruit IO Username and Key</h3>
<p>
<ol>
<li>If you've already connected your Pixel Gadget to a network you'll need to reset it and follow the instructions at <a href="https://bradrblack.github.io/index.html">https://bradrblack.github.io/index.html</a> to re-configure.  You'll need your Adafruit IO username and key info available under the "My Key" menu on io.adafruit.com.  Reset the device by holding down the button until the screen clears and then is filled with a rainbow pattern indicated it has restart.
</ol>
</p>
<h3>Step 4: There is no Step 4!</h3>
<p>Well, actually you probably need to test out some commands.  You can use the following:
<ul align="left">
<li>Show current time: Hey Google, "gadget time"
<li>Change to clock mode: Hey Google, "gadget clock"
<li>Change to next color/pattern: Hey Google, "gadget change"
<li>Change to a specific color: Hey Google, "gadget red|blue|purple|green|random|christmas"
<li>Change the intensity: Hey Google, "gadget high|low"
<li>Save the current color/intensity for startup: Hey Google, "gadget save"
<li>Restart: Hey Google, "gadget reset|restart|reboot"
</ul>
If it is not working, first check the feed activity on Adafruit IO.  You should see commands coming in.  You must get the username and key correct on the device -- if you see a cylcling square on the gadget startup for more than a few seconds, the Adafruit IO login could be failing and you'll need to restart and re-enter the username and key.  Still not working?  Contact your beta coordinator for help.
</p>
</ol><br><br>
<h3>CONGRATS!! You are now be able to enjoy the features of Pixel Gadget Cloud with your voice assistant!</h3>
<br>
</p>
</body>
</html>

